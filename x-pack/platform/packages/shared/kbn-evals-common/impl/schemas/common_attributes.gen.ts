/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License
 * 2.0; you may not use this file except in compliance with the Elastic License
 * 2.0.
 */

/*
 * NOTICE: Do not edit this file manually.
 * This file is automatically generated by the OpenAPI Generator, @kbn/openapi-generator.
 *
 * info:
 *   title: Evals Common Attributes
 *   version: 1
 */

import { z } from '@kbn/zod';

export type Model = z.infer<typeof Model>;
export const Model = z.object({
  id: z.string(),
  family: z.string().optional(),
  provider: z.string().optional(),
});

export type BuildkiteMetadata = z.infer<typeof BuildkiteMetadata>;
export const BuildkiteMetadata = z.object({
  build_id: z.string().optional(),
  job_id: z.string().optional(),
  build_url: z.string().optional(),
  pipeline_slug: z.string().optional(),
  pull_request: z.string().optional(),
  branch: z.string().optional(),
  commit: z.string().optional(),
});

export type ExampleInfo = z.infer<typeof ExampleInfo>;
export const ExampleInfo = z.object({
  id: z.string(),
  index: z.number().int(),
  dataset: z.object({
    id: z.string(),
    name: z.string(),
  }),
});

export type TaskInfo = z.infer<typeof TaskInfo>;
export const TaskInfo = z.object({
  trace_id: z.string().nullable().optional(),
  repetition_index: z.number().int(),
  model: Model,
});

export type EvaluatorInfo = z.infer<typeof EvaluatorInfo>;
export const EvaluatorInfo = z.object({
  name: z.string(),
  score: z.number().nullable().optional(),
  label: z.string().nullable().optional(),
  explanation: z.string().nullable().optional(),
  metadata: z.object({}).catchall(z.unknown()).nullable().optional(),
  trace_id: z.string().nullable().optional(),
  model: Model,
});

export type RunMetadata = z.infer<typeof RunMetadata>;
export const RunMetadata = z.object({
  git_branch: z.string().nullable().optional(),
  git_commit_sha: z.string().nullable().optional(),
  total_repetitions: z.number().int(),
});

export type EvaluationScoreDocument = z.infer<typeof EvaluationScoreDocument>;
export const EvaluationScoreDocument = z.object({
  '@timestamp': z.string(),
  run_id: z.string(),
  experiment_id: z.string(),
  suite: z
    .object({
      id: z.string().optional(),
    })
    .optional(),
  ci: z
    .object({
      buildkite: BuildkiteMetadata.optional(),
    })
    .optional(),
  example: ExampleInfo,
  task: TaskInfo,
  evaluator: EvaluatorInfo,
  run_metadata: RunMetadata,
  environment: z.object({
    hostname: z.string().optional(),
  }),
});

export type EvaluatorStats = z.infer<typeof EvaluatorStats>;
export const EvaluatorStats = z.object({
  dataset_id: z.string(),
  dataset_name: z.string(),
  evaluator_name: z.string(),
  stats: z.object({
    mean: z.number(),
    median: z.number(),
    std_dev: z.number(),
    min: z.number(),
    max: z.number(),
    count: z.number().int(),
  }),
});

export type TraceSpan = z.infer<typeof TraceSpan>;
export const TraceSpan = z.object({
  span_id: z.string(),
  trace_id: z.string(),
  parent_span_id: z.string().optional(),
  name: z.string(),
  kind: z.string().optional(),
  status: z.string().optional(),
  start_time: z.string(),
  end_time: z.string().optional(),
  duration_ms: z.number(),
  attributes: z.object({}).catchall(z.unknown()).optional(),
});
